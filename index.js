const path = require('path');
const express = require('express');
const port = 8000;

const app = express();

app.set('view engine','ejs');
app.set('views', path.join(__dirname,'views') );
app.use(express.urlencoded());
app.use(express.static('assets'));

var contactList = [
    {
        name: 'Prathyusha',
        phone: '9999999999'
    },
    {
        name: 'Hulk',
        phone: '8888888888'
    },
    {
        name: 'Sai Krishna',
        phone: '9787686895'
    },
    {
        name: 'john caleb',
        phone: '7987969899'
    },
];


app.get('/',function(req,res){
    return res.render('home', {
        title: "My Contact List",
        contact_List: contactList
    });
});

app.post('/create-contact',function(req,res){
    contactList.push(req.body);

    return res.redirect('/');
});

app.get('/delete-contact/:i',function(req,res){
    var i = parseInt(req.params.i);
    contactList.splice(i,1);
    return res.redirect('/');
})
app.get('/practice',function(req,res){
    return res.render('practice',{title: 'let us play with ejs'});
});



app.listen(port, function(err){
    if(err){
        console.log('error',err);
    }
    console.log('listening to port 8000');
})
///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////  